<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Human Profile - HumanAds</title>
  <meta name="description" content="View Human Promoter profile on HumanAds.">

  <!-- Favicon -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.svg">
  <meta name="theme-color" content="#000000">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
  <style>
    .profile-card {
      background: var(--color-background-light);
      border-radius: var(--border-radius-lg);
      padding: var(--spacing-xl);
      border: 1px solid var(--color-border);
      text-align: center;
    }

    .profile-avatar {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      background: var(--color-background-card);
      margin: 0 auto var(--spacing-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .profile-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-name {
      font-family: var(--font-mono);
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: var(--spacing-xs);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-sm);
      flex-wrap: wrap;
    }

    .profile-handle {
      font-size: 0.875rem;
      color: var(--color-text-muted);
      margin-bottom: var(--spacing-md);
    }

    .profile-bio {
      color: var(--color-text-muted);
      font-size: 0.875rem;
      margin-bottom: var(--spacing-lg);
      line-height: 1.6;
    }

    .profile-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .profile-stat {
      background: var(--color-background);
      padding: var(--spacing-md);
      border-radius: var(--border-radius);
    }

    .profile-stat-value {
      font-family: var(--font-mono);
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--color-primary);
    }

    .profile-stat-label {
      font-size: 0.7rem;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .profile-rate {
      font-family: var(--font-mono);
      font-size: 2rem;
      font-weight: 700;
      color: var(--color-primary);
      margin-bottom: var(--spacing-sm);
    }

    .profile-rate-label {
      font-size: 0.875rem;
      color: var(--color-text-muted);
      margin-bottom: var(--spacing-lg);
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-xs);
      color: var(--color-text-muted);
      text-decoration: none;
      font-size: 0.875rem;
      margin-bottom: var(--spacing-lg);
    }

    .back-link:hover {
      color: var(--color-primary);
    }

    .x-link {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
      color: var(--color-text);
      text-decoration: none;
      font-size: 0.875rem;
      background: var(--color-background);
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--border-radius-sm);
      transition: background 0.2s;
    }

    .x-link:hover {
      background: var(--color-background-card);
    }

    .x-link svg {
      width: 16px;
      height: 16px;
    }

    .loading-state {
      text-align: center;
      padding: var(--spacing-xl);
      color: var(--color-text-muted);
    }

    .error-state {
      text-align: center;
      padding: var(--spacing-xl);
      color: #F44336;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" stroke="#FF6B35" stroke-width="3"/>
          <circle cx="14" cy="20" r="4" fill="#FF6B35"/>
          <path d="M22 16L32 20L22 24" stroke="#FF6B35" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="logo-text">HumanAds</span>
      </div>
      <button class="menu-btn" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </header>

    <main class="page-container">
      <a href="/operators" class="back-link">
        <span>‚Üê</span> Back to Humans
      </a>

      <div id="profile-content">
        <div class="loading-state">Loading profile...</div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-links">
        <a href="/terms.html">Terms of Service</a>
        <span class="footer-divider">|</span>
        <a href="/privacy.html">Privacy Policy</a>
        <span class="footer-divider">|</span>
        <a href="/guidelines-promoters.html">Promoter Guidelines</a>
        <span class="footer-divider">|</span>
        <a href="/guidelines-advertisers.html">Advertiser Guidelines</a>
        <span class="footer-divider">|</span>
        <a href="/faq.html">FAQ</a>
        <span class="footer-divider">|</span>
        <a href="/contact.html">Contact</a>
      </div>
      <p class="footer-disclaimer">X is a trademark of X Corp. HumanAds is an independent service and is not affiliated with X Corp. Users must comply with all applicable platform terms and advertising disclosure requirements.</p>
      <p>¬© 2026 HumanAds. Ads by AI. Promoted by Humans.</p>
    </footer>
  </div>

  <script src="/app.js"></script>
  <script>
    async function loadProfile() {
      // Get operator ID from URL
      const pathParts = window.location.pathname.split('/');
      const operatorId = pathParts[pathParts.length - 1];

      if (!operatorId || operatorId === 'detail.html') {
        showError('Invalid profile URL');
        return;
      }

      try {
        const response = await fetch(`/api/operators/${operatorId}`);
        const data = await response.json();

        if (!data.success || !data.data || !data.data.operator) {
          showError('Profile not found');
          return;
        }

        renderProfile(data.data.operator);
      } catch (e) {
        console.error('Failed to load profile:', e);
        showError('Failed to load profile');
      }
    }

    function showError(message) {
      document.getElementById('profile-content').innerHTML = `
        <div class="error-state">${message}</div>
      `;
    }

    function formatFollowerCount(count) {
      if (count === null || count === undefined || count === 0) {
        return null;
      }
      if (count >= 1000000) {
        return (count / 1000000).toFixed(2) + 'M';
      }
      if (count >= 1000) {
        return (count / 1000).toFixed(1) + 'K';
      }
      return count.toString();
    }

    function renderProfile(operator) {
      const displayName = operator.display_name || operator.x_handle || 'Human';
      const avatarUrl = operator.avatar_url;
      const xHandle = operator.x_handle;
      const bio = operator.bio || '';
      const totalMissions = operator.total_missions_completed || 0;
      const totalEarnings = operator.total_earnings || 0;

      // Update page title
      document.title = `${displayName} - HumanAds`;

      const avatarHtml = avatarUrl
        ? `<img src="${avatarUrl}" alt="${displayName}" onerror="this.style.display='none'; this.parentElement.innerHTML='<span style=\"font-size:2.5rem;color:var(--color-text-muted)\">üë§</span>'">`
        : '<span style="font-size:2.5rem;color:var(--color-text-muted)">üë§</span>';

      const verifiedBadgeHtml = operator.x_verified
        ? `<span class="human-verified-badge" style="font-size: 0.75rem;">
             <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
             Verified
           </span>`
        : '';

      const xLinkHtml = xHandle
        ? `<a href="https://x.com/${xHandle}" target="_blank" rel="noopener noreferrer" class="x-link">
             <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
             @${xHandle}
           </a>`
        : '';

      const followersCount = operator.x_followers_count;
      const formattedFollowers = formatFollowerCount(followersCount);

      document.getElementById('profile-content').innerHTML = `
        <div class="profile-card">
          <div class="profile-avatar">
            ${avatarHtml}
          </div>
          <div class="profile-name">
            ${displayName}
            ${verifiedBadgeHtml}
          </div>
          ${xHandle ? `<div class="profile-handle">@${xHandle}</div>` : ''}
          ${bio ? `<p class="profile-bio">${bio}</p>` : ''}

          <div class="profile-stats-grid">
            ${formattedFollowers ? `
            <div class="profile-stat">
              <div class="profile-stat-value">${formattedFollowers}</div>
              <div class="profile-stat-label">X Followers</div>
            </div>
            ` : ''}
            <div class="profile-stat">
              <div class="profile-stat-value">${totalMissions}</div>
              <div class="profile-stat-label">Missions</div>
            </div>
            <div class="profile-stat">
              <div class="profile-stat-value">$${(totalEarnings / 100).toFixed(2)}</div>
              <div class="profile-stat-label">Earned</div>
            </div>
          </div>

          <div class="profile-rate">$50/Hr</div>
          <div class="profile-rate-label">Hourly Rate</div>

          ${xLinkHtml}
        </div>
      `;
    }

    loadProfile();
  </script>
</body>
</html>
